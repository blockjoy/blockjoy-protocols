version: 0.0.1
container_uri: docker-daemon://ethereum-erigon:latest
sku_code: ETH-ERG
org_id: null
description: Ethereum Erigon node 
visibility: public
protocol_key: ethereum
variants:
  # The same protocol can have different implementations. This field let identify what implementation(s) has been used.
  # Variant name may additional contain protocol network name e.g. "eth-mainnet".
  # This value will be available in a Rhai runtime via `node_env().variant_key`.
  - key: erigon-mainnet-archive
    archive_pointers:
      - pointer: !store_id ethereum-erigon-mainnet-archive-v1
      - pointer: !store_id ethereum-erigon-mainnet-archive-v1
        new_archive_properties: [ "tracing-api-on-value" ]
    min_cpu: 8
    min_memory_mb: 32000
    min_disk_gb: 5000
  - key: erigon-sepolia-archive
    archive_pointers:
      - pointer: !store_id ethereum-erigon-sepolia-archive-v1
      - pointer: !store_id ethereum-erigon-sepolia-archive-v1 
        new_archive_properties: [ "tracing-api-on-value" ]
    min_cpu: 4
    min_memory_mb: 16000
    min_disk_gb: 2000
  - key: erigon-goerli-archive
    archive_pointers:
      - pointer: !store_id ethereum-erigon-goerli-archive-v1
      - pointer: !store_id ethereum-erigon-goerli-archive-v1 
        new_archive_properties: [ "tracing-api-on-value" ]
    min_cpu: 4
    min_memory_mb: 16000
    min_disk_gb: 2000
  - key: erigon-mainnet-full
    archive_pointers:
      - pointer: !store_id ethereum-erigon-mainnet-full-v1
      - pointer: !combination_disallowed
        new_archive_properties: [ "tracing-api-on-value" ]
    min_cpu: 8
    min_memory_mb: 32000
    min_disk_gb: 5000
  - key: erigon-sepolia-full
    archive_pointers:
      - pointer: !store_id ethereum-erigon-sepolia-full-v1
      - pointer: !combination_disallowed
        new_archive_properties: [ "tracing-api-on-value" ]
    min_cpu: 4
    min_memory_mb: 16000
    min_disk_gb: 2000
  - key: erigon-goerli-full
    archive_pointers:
      - pointer: !store_id ethereum-erigon-goerli-full-v1
      - pointer: !combination_disallowed
        new_archive_properties: [ "tracing-api-on-value" ]
    min_cpu: 4
    min_memory_mb: 16000
    min_disk_gb: 2000
firewall_config:
  default_in: deny
  default_out: allow
  rules:
    - key: Allow incoming ports TCP
      description: Allow TCP inbound traffic on port 80, 443
      protocol: tcp
      direction: in
      action: allow
      ips:
        - ip: 0.0.0.0/0
          name: allow all traffic
      ports:
        - port: 80
          name: HTTP port
        - port: 443
          name: HTTPS port
        - port: 3000
          name: Grafana port
    - key: Allow P2P ports TCP/UDP
      description: Allow inbound traffic on P2P ports
      protocol: both
      direction: in
      action: allow
      ips:
        - ip: 0.0.0.0/0
          name: allow all traffic
      ports:
        - port: 30303
          name: P2P port 1
        - port: 30304
          name: P2P port 2 
        - port: 42069
          name: Torrent port
properties:
  - key: tracing-api
    description: This enables or disables the tracing API
    dynamic_value: false
    default_value: off-value
    ui_type: !switch
      on:
        value: on-value
        impact:
          new_archive: true
          add_cpu: 3
          add_memory_bytes: 10000000
          add_disk_bytes: 10000000000
      off:
        value: off-value
        impact: null
  # Unique property key. Property value will be available in a Rhai runtime via `node_params().<key>` (e.g. `node_params().arbitrary_property`).
  # It is required to be lower-kebab-case.